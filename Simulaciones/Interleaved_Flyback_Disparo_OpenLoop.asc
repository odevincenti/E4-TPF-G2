Version 4
SHEET 1 4228 2080
WIRE -96 -256 -96 -304
WIRE -96 -256 -288 -256
WIRE 96 -256 -96 -256
WIRE 752 -256 592 -256
WIRE 896 -256 752 -256
WIRE 1056 -256 896 -256
WIRE 592 -224 592 -256
WIRE 752 -224 752 -256
WIRE -288 -208 -288 -256
WIRE 96 -208 96 -256
WIRE 896 -192 896 -256
WIRE 592 -128 592 -160
WIRE 752 -128 752 -160
WIRE -512 -112 -512 -144
WIRE -288 -112 -288 -128
WIRE 96 -112 96 -128
WIRE 1056 -112 1056 -256
WIRE 896 -48 896 -112
WIRE 592 -32 592 -48
WIRE 752 -32 752 -48
WIRE -512 0 -512 -32
WIRE 592 80 592 48
WIRE 752 80 752 48
WIRE 752 80 592 80
WIRE 896 80 896 16
WIRE 896 80 752 80
WIRE 1056 80 1056 -32
WIRE 1056 80 896 80
WIRE -176 112 -176 80
WIRE -16 112 -16 80
WIRE 752 128 592 128
WIRE 896 128 752 128
WIRE 1024 128 896 128
WIRE 1136 128 1024 128
WIRE 592 160 592 128
WIRE 752 160 752 128
WIRE 896 192 896 128
WIRE -512 208 -512 176
WIRE 1024 208 1024 128
WIRE -288 240 -288 -32
WIRE -256 240 -288 240
WIRE 96 240 96 -32
WIRE 96 240 64 240
WIRE -176 256 -176 192
WIRE -176 256 -192 256
WIRE -16 256 -16 192
WIRE 0 256 -16 256
WIRE 592 256 592 224
WIRE 752 256 752 224
WIRE 1136 256 1136 128
WIRE -256 272 -288 272
WIRE 96 272 64 272
WIRE -512 320 -512 288
WIRE -288 336 -288 272
WIRE -96 336 -288 336
WIRE 96 336 96 272
WIRE 96 336 -96 336
WIRE 896 336 896 272
WIRE 1024 336 1024 272
WIRE 592 368 592 336
WIRE 752 368 752 336
WIRE -96 480 -96 336
WIRE 592 480 592 448
WIRE 752 480 752 448
WIRE 752 480 592 480
WIRE 896 480 896 400
WIRE 896 480 752 480
WIRE 1024 480 1024 416
WIRE 1024 480 896 480
WIRE 1136 480 1136 336
WIRE 1136 480 1024 480
WIRE 0 720 0 688
WIRE 0 720 -192 720
WIRE 1120 720 1120 704
WIRE 1120 720 928 720
WIRE -800 752 -800 720
WIRE 384 752 384 704
WIRE 0 768 0 720
WIRE 1120 768 1120 720
WIRE -192 784 -192 720
WIRE 928 784 928 720
WIRE 304 800 256 800
WIRE 512 800 464 800
WIRE -64 816 -96 816
WIRE 1056 816 1024 816
WIRE 304 848 256 848
WIRE 512 848 480 848
WIRE -800 880 -800 832
WIRE -192 912 -192 864
WIRE -96 912 -96 816
WIRE -96 912 -192 912
WIRE 0 912 0 864
WIRE 96 912 0 912
WIRE 928 912 928 864
WIRE 1024 912 1024 816
WIRE 1024 912 928 912
WIRE 1120 912 1120 864
WIRE 1216 912 1120 912
WIRE 384 928 384 896
WIRE -464 960 -512 960
WIRE -192 960 -192 912
WIRE 0 960 0 912
WIRE 672 960 608 960
WIRE 928 960 928 912
WIRE 1120 960 1120 912
WIRE -352 1008 -400 1008
WIRE -256 1008 -272 1008
WIRE -96 1008 -96 912
WIRE -64 1008 -96 1008
WIRE 768 1008 736 1008
WIRE 864 1008 848 1008
WIRE 1024 1008 1024 912
WIRE 1056 1008 1024 1008
WIRE -464 1024 -512 1024
WIRE 672 1024 608 1024
WIRE -192 1120 -192 1056
WIRE 0 1120 0 1056
WIRE 0 1120 -192 1120
WIRE 928 1120 928 1056
WIRE 1120 1120 1120 1056
WIRE 1120 1120 928 1120
FLAG -512 0 0
FLAG -512 -144 Vd
FLAG 0 1120 0
FLAG 1120 1120 0
FLAG 96 912 VgA
FLAG 1216 912 VgB
FLAG 0 688 Vgg
FLAG 1120 704 Vgg
FLAG 256 848 Vcontrol
FLAG -512 960 Q
FLAG 608 960 _Q
FLAG 512 800 Q
FLAG 512 848 _Q
FLAG -512 1024 Vcontrol
FLAG 608 1024 Vcontrol
FLAG -176 80 VgA
FLAG -16 80 VgB
FLAG -96 -304 Vd
FLAG -96 480 0
FLAG 1056 -256 Vout2
FLAG 1056 80 0
FLAG 1024 480 0
FLAG -800 880 0
FLAG -800 720 Vcontrol
FLAG 384 928 0
FLAG 384 704 0
FLAG -512 320 0
FLAG -512 176 Vgg
FLAG 256 800 _Q
DATAFLAG 944 -256 "round($*100)/100"
DATAFLAG 944 128 "round($*100)/100"
SYMBOL voltage -512 -128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL npn -64 768 R0
SYMATTR InstName Q1A
SYMATTR Value 2N2222
SYMBOL npn 1056 768 R0
SYMATTR InstName Q1B
SYMATTR Value 2N2222
SYMBOL pnp -64 1056 M180
SYMATTR InstName Q2A
SYMATTR Value 2N2905A
SYMBOL pnp 1056 1056 M180
SYMATTR InstName Q2B
SYMATTR Value 2N2905A
SYMBOL res -208 768 R0
SYMATTR InstName RcA
SYMATTR Value 560
SYMBOL npn -256 960 R0
SYMATTR InstName QcA
SYMATTR Value BC547C
SYMBOL res -256 992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RbA
SYMATTR Value 1k
SYMBOL Digital\\and -432 928 R0
SYMATTR InstName AA
SYMBOL Digital\\dflop 384 752 R0
SYMATTR InstName A1
SYMBOL res 912 768 R0
SYMATTR InstName RcB
SYMATTR Value 560
SYMBOL npn 864 960 R0
SYMATTR InstName QcB
SYMATTR Value BC547C
SYMBOL res 864 992 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RbB
SYMATTR Value 1k
SYMBOL Digital\\and 704 928 R0
SYMATTR InstName AB
SYMBOL res -192 208 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RgA
SYMATTR Value 33
SYMBOL ind2 -304 -112 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1A
SYMATTR Value 588.11µ
SYMATTR Type ind
SYMBOL res -304 -128 R0
SYMATTR InstName rL1A
SYMATTR Value 0.1
SYMBOL res 0 208 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RgB
SYMATTR Value 33
SYMBOL ind2 80 -112 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1B
SYMATTR Value 588.11µ
SYMATTR Type ind
SYMBOL res 80 -128 R0
SYMATTR InstName rL1B
SYMATTR Value 0.1
SYMBOL AutoGenerated\\irf540 -224 256 M0
SYMATTR InstName UA
SYMBOL AutoGenerated\\irf540 32 256 R0
SYMATTR InstName UB
SYMBOL cap 880 -48 R0
WINDOW 0 32 3 Left 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res 1040 -128 R0
SYMATTR InstName R1
SYMATTR Value 68
SYMBOL ind2 608 -144 M0
SYMATTR InstName L2A
SYMATTR Type ind
SYMATTR Value 47.05031m
SYMBOL cap 880 336 R0
WINDOW 0 32 3 Left 2
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL ind2 608 240 M0
SYMATTR InstName L3A
SYMATTR Type ind
SYMATTR Value 1152.69µ
SYMBOL res 880 176 R0
SYMATTR InstName ESR1
SYMATTR Value 0.2
SYMBOL res 880 -208 R0
SYMATTR InstName ESR2
SYMATTR Value 0.2
SYMBOL res 1008 320 R0
SYMATTR InstName Rled1
SYMATTR Value 1k
SYMBOL res 576 -48 R0
SYMATTR InstName rL2A
SYMATTR Value 0.2
SYMBOL res 576 352 R0
SYMATTR InstName rL3A
SYMATTR Value 0.1
SYMBOL LED 1008 208 R0
SYMATTR InstName LED1
SYMBOL res 1120 240 R0
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL diode 608 -160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 608 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL ind2 768 -144 M0
SYMATTR InstName L2B
SYMATTR Type ind
SYMATTR Value 47.05031m
SYMBOL res 736 -48 R0
SYMATTR InstName rL2B
SYMATTR Value 0.2
SYMBOL diode 768 -160 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL ind2 768 240 M0
SYMATTR InstName L3B
SYMATTR Type ind
SYMATTR Value 1152.69µ
SYMBOL res 736 352 R0
SYMATTR InstName rL3B
SYMATTR Value 0.1
SYMBOL diode 768 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL voltage -800 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VA1
SYMATTR Value PULSE(0 1 0 0 0 4u 6.665u)
SYMBOL voltage -512 192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 18
TEXT 1344 -312 Left 2 ;Directivas Spice
TEXT 1392 -120 Left 2 !.inc opamp.sub
TEXT 1392 -264 Left 2 !.param Fs = 75k
TEXT 1392 -232 Left 2 !.param Ts = 1/Fs
TEXT 1392 -200 Left 2 !.param Ton = Ts* D
TEXT 1392 -168 Left 2 !.param D=0.3
TEXT 1392 -88 Left 2 !.tran 0 20m 0 1u
TEXT -368 -280 Left 2 !KA L1A L2A L3A 1
TEXT -16 -280 Left 2 !KB L1B L2B L3B 1
RECTANGLE Normal 1264 576 -640 -368 2
RECTANGLE Normal 1888 -48 1312 -352 2
